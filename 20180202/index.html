<!DOCTYPE html>
<html>
  <head>
    <title>Augmenting data exploration with interactive graphics</title>
    <meta charset="utf-8">
    <meta name="author" content="Carson Sievert" />
    <link href="index_files/remark-css/example.css" rel="stylesheet" />
    <link href="index_files/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="main.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Augmenting data exploration with interactive graphics
### Carson Sievert
### Slides: <a href="https://talks.cpsievert.me" class="uri">https://talks.cpsievert.me</a> <br /> <br /> <i class="fa  fa-twitter "></i> <a href='https://twitter.com/cpsievert'><span class="citation" data-cites="cpsievert">@cpsievert</span></a> <br /> <i class="fa  fa-github "></i> <a href='https://github.com/cpsievert'><span class="citation" data-cites="cpsievert">@cpsievert</span></a> <br /> <i class="fa  fa-envelope "></i> <a href="mailto:cpsievert1@gmail.com">cpsievert1@gmail.com</a> <br /> <i class="fa  fa-globe "></i> <a href="https://cpsievert.me/" class="uri">https://cpsievert.me/</a> <br /> <br /> Slides released under <a href='https://github.com/cpsievert/talks/blob/gh-pages/LICENSE'>Creative Commons</a>

---

class: principles 

## About me

* PhD in statistics at Iowa State with Dr. Heike Hofmann (Dec 2016) 
  
  * Thesis: [Interfacing R with Web Technologies for Interactive Statistical Graphics and Computing with Data](http://lib.dr.iastate.edu/etd/15422/)
  
* CEO of [Sievert Consulting](https://consulting.cpsievert.me/) LLC (Jan 2017)

  * Clients include: plotly, NOAA, Sandia Labs, O'Reilly
  
  * Looking for more part-time projects
  
* The majority of my work is in interactive data visualization
  
  * Primarily work in R, dabble in JavaScript and python.
  
  * Maintain numerous R packages including: plotly, LDAvis, pitchRx

---
background-image: url(../20171207/workflow.svg)
background-size: contain
class: inverse

# Data Science Workflow


---
background-image: url(../20171207/workflow1.svg)
background-size: contain
class: inverse

# Expository vis

&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;


### The web is the preferred medium for communicating results

### Assuming you know _exactly_ what you want to visualize, many good data vis frameworks exist (e.g. [d3.js](https://d3js.org/))

---
background-image: url(../20171207/workflow2.svg)
background-size: contain
class: inverse

# Exploratory vis

&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;

### Web technologies weren't designed for data exploration

### Let's not forget that interactive graphics can augment _exploration_!

---
class: principles

## Interactive graphics augment exploration&lt;sup&gt;1&lt;/sup&gt;

* Identify structure that otherwise goes missing ([Tukey 1972](http://stat-graphics.org/movies/prim9.html)).
    
* Search for information quickly without fully specified questions&lt;sup&gt;2&lt;/sup&gt; ([Unwin &amp; Hofmann, 2000](https://www.researchgate.net/publication/2425912_GUI_and_Command-line_-_Conflict_or_Synergy))
    * Multiple linked views are the optimal framework for posing queries about data ([Buja, Cook, &amp; Swayne 1996](https://www.jstor.org/stable/1390754))
    
* Diagnose and understand models ([Wickham, Cook, &amp; Hofmann 2015](http://onlinelibrary.wiley.com/doi/10.1002/sam.11271/abstract)).

.footnote[
---

[1]: Statisticians were building (very advanced!) int graphics systems decades ago --   &lt;http://stat-graphics.org/movies/&gt;

[2]: Worried about inference? See visual ([Majumder et al 2013](http://amstat.tandfonline.com/doi/abs/10.1080/01621459.2013.808157?journalCode=uasa20#.Wl01_ZM-dTY)) and post-selection ([Berk et al 2013](https://projecteuclid.org/euclid.aos/1369836961)) inference frameworks.
]

---
class: principles

## Interactive graphics augment exploration

* Identify structure that otherwise goes missing ([Tukey 1972](http://stat-graphics.org/movies/prim9.html)).
    
* &lt;div class="highlight"&gt;Search for information quickly&lt;/div&gt; without fully specified questions ([Unwin &amp; Hofmann, 2000](https://www.researchgate.net/publication/2425912_GUI_and_Command-line_-_Conflict_or_Synergy))
    * [Multiple linked views] are the optimal framework for posing queries about data ([Buja, Cook, &amp; Swayne 1996](https://www.jstor.org/stable/1390754))
    
* Diagnose and understand models ([Wickham, Cook, &amp; Hofmann 2015](http://onlinelibrary.wiley.com/doi/10.1002/sam.11271/abstract)).

---

&lt;iframe src="hapmap.html" width="100%" height="700" scrolling="no" seamless="seamless" frameBorder="0"&gt; &lt;/iframe&gt;


---
class: principles

## Interactive graphics augment exploration

* Identify structure that otherwise goes missing ([Tukey 1972](http://stat-graphics.org/movies/prim9.html)).
    
* Search for information quickly without fully specified questions ([Unwin &amp; Hofmann, 2000](https://www.researchgate.net/publication/2425912_GUI_and_Command-line_-_Conflict_or_Synergy))
    * &lt;div class="highlight"&gt;[Multiple linked views] are the optimal framework for posing queries about data&lt;/div&gt; ([Buja, Cook, &amp; Swayne 1996](https://www.jstor.org/stable/1390754))
    
* Diagnose and understand models ([Wickham, Cook, &amp; Hofmann 2015](http://onlinelibrary.wiley.com/doi/10.1002/sam.11271/abstract)).

---
background-image: url(https://i.imgur.com/Id2nVFG.gif)
background-size: contain

&lt;div align="right"&gt;
  &lt;a href="../20180118/epl2.html" target="_blank"&gt;Live demo &lt;/a&gt;
  (&lt;a href="https://github.com/ropensci/plotly/blob/master/demo/crosstalk-highlight-epl2.R"&gt;code&lt;/a&gt;)
&lt;/div&gt;

---
class: middle, inverse
background-image: url(https://i.imgur.com/Id2nVFG.gif)
background-size: contain

# Generally useful for comparing within/across panels!


---
### An example with Texas housing prices

```r
library(dplyr)
tx &lt;- txhousing %&gt;%
  select(city, year, month, median) %&gt;%
  filter(city %in% c("Galveston", "Midland", "Odessa", "South Padre Island"))
tx
```

```r
#&gt; # A tibble: 748 x 4
#&gt;         city  year month median
#&gt;        &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
#&gt;  1 Galveston  2000     1  95000
#&gt;  2 Galveston  2000     2 100000
#&gt;  3 Galveston  2000     3  98300
#&gt;  4 Galveston  2000     4 111100
#&gt;  5 Galveston  2000     5  89200
#&gt;  6 Galveston  2000     6 108600
#&gt;  7 Galveston  2000     7  99000
#&gt;  8 Galveston  2000     8  96200
#&gt;  9 Galveston  2000     9 104000
#&gt; 10 Galveston  2000    10 118800
#&gt; # ... with 738 more rows
```

```r
library(plotly)
library(crosstalk)
```

---
### Compare within and across cities

```r
*TX &lt;- SharedData$new(tx, ~year)
p &lt;- ggplot(TX, aes(month, median, group = year)) + geom_line() +
  facet_wrap(~city, ncol = 2)
highlight(ggplotly(p), dynamic = T, persistent = T, selectize = T)
```

&lt;iframe src="../20171207/txhousing.html" width="100%" height="450" scrolling="no" seamless="seamless" frameBorder="0"&gt; &lt;/iframe&gt;

---
class: center, middle

# Have _lots_ of panels?

### Check out [TrelliscopeJS with Plotly](http://ryanhafen.com/blog/trelliscopejs-plotly)

---
class: inverse, middle, center

# Beyond linked trellis (i.e., facet) displays

---
### Dynamic aggregation

&lt;iframe src="mpg.html" width="100%" height="600" scrolling="no" seamless="seamless" frameBorder="0"&gt; &lt;/iframe&gt;

---
class: middle, principles

## The implementation

```r
d &lt;- SharedData$new(mpg)
dots &lt;- plot_ly(d, color = ~class, x = ~displ, y = ~cyl)
boxs &lt;- plot_ly(d, color = ~class, x = ~class, y = ~cty) %&gt;% add_boxplot()
bars &lt;- plot_ly(d, x = ~class, color = ~class)

subplot(dots, boxs) %&gt;%
  subplot(bars, nrows = 2) %&gt;%
  layout(barmode = "overlay") %&gt;%
  highlight("plotly_selected")
```

---
## Query missing values by city

&lt;iframe src="../20171207/txhousing-missing.html" width="100%" height="500" scrolling="no" seamless="seamless" frameBorder="0"&gt; &lt;/iframe&gt;

---
class: bottom, left 
background-image: url(../20171207/pipeline.svg)
background-size: contain

## The 'data pipeline'

---
class: bottom, center, inverse
background-image: url(https://camo.githubusercontent.com/77e740dc93b1c9357f833100a7f90b2b906a4c63/687474703a2f2f692e696d6775722e636f6d2f635973754e516e2e676966)
background-size: contain


&lt;h1 style="margin-bottom: 10px"&gt; Filter vs highlight &lt;/h1&gt;


---
class: principles

## Interactive graphics augment exploration!

* Identify structure that otherwise goes missing ([Tukey 1972](http://stat-graphics.org/movies/prim9.html)).

* Search for information quickly without fully specified questions ([Unwin &amp; Hofmann, 2000](https://www.researchgate.net/publication/2425912_GUI_and_Command-line_-_Conflict_or_Synergy))
    * Multiple linked views are the optimal framework for posing queries about data ([Buja, Cook, &amp; Swayne 1996](https://www.jstor.org/stable/1390754))
    
    
* &lt;div class="highlight"&gt;Diagnose and understand models&lt;/div&gt; ([Wickham, Cook, &amp; Hofmann 2015](http://onlinelibrary.wiley.com/doi/10.1002/sam.11271/abstract)).

---
## Deeper look at linear model diagnostics

```r
# choose a model by AIC stepping backwards 
mod &lt;- step(lm(mpg ~ ., data = mtcars), trace = FALSE)
formula(mod)
```

```r
mpg ~ wt + qsec + am
```

```r
# produce (static ggplot2) diagnostic plot
library(GGally)
pm &lt;- ggnostic(mod, mapping = aes(color = am))

# make it interactive
library(plotly)
ggplotly(pm)
```

---

&lt;iframe src="../20180118/ggnostic.html" width="100%" height="650" scrolling="no" seamless="seamless" frameBorder="0"&gt; &lt;/iframe&gt;

???

The noticeably high value of cooksd suggests a large influence on the fitted model. Highlighting this point makes it obvious that it is influential since it has a unusually high response/residual in a fairly sparse region of the design space (i.e., it has a pretty high value of wt) and removing it would significantly reduce the estimated standard deviation (sigma). By comparison, the other two observations with similar values of wt have a response value very close to the overall mean, so even though their value of hat is high, their value of sigma is low.

---
### See relationships evolve over time ([made via ggplot2](https://plotly-book.cpsievert.me/linking-animated-views.html))

&lt;a href="../20180118/gapminder.html" target="_blank"&gt;
  &lt;img src="https://plotly-book.cpsievert.me/images/gapminder-highlight-animation.gif" width = "100%" /&gt;
&lt;/a&gt;

---
background-image: url(../20170803/tour.gif)
background-size: contain
class: middle

### Interactively [plot models in data space](../20180118/tour.html) ([code](https://github.com/ropensci/plotly/blob/master/demo/animation-tour-USArrests.R))



---
class: inverse, middle, center

# Note: 'crosstalk highlighting' works _without shiny_. Here are some examples _with shiny_


---
background-image: url(https://i.imgur.com/T7GSpv9.gif)
background-size: contain
class: principles

&lt;https://github.com/cpsievert/zikar&gt;

---
background-image: url(https://i.imgur.com/MGbR5AI.gif)
background-size: contain
class: principles

&lt;div align="right"&gt;
&lt;a href='https://github.com/cpsievert/bcviz'&gt;https://github.com/cpsievert/bcviz&lt;/a&gt;
&lt;/div&gt;

---
background-image: url(https://i.imgur.com/csIUJX0.gif)
background-size: contain
class: principles

&lt;https://github.com/cpsievert/apps&gt;

---

.pull-left[
&lt;img src="../gifs/drowning.gif" width="80%"/&gt;
]

.pull-right[
# Lost in a sea of interactive techniques?

### Focus on the analysis task/question first

### Often many different ways to do the same thing!
]

---
background-image: url(../20171207/taxonomy.svg)
background-size: contain
class: bottom, inverse

### _Interactive High-Dimensional Data Visualization_, [Buja, Cook, &amp; Swayne 1996](https://www.jstor.org/stable/1390754); authors of [GGobi](http://ggobi.org)

---
## Summary

### Interactive graphics *can* augment exploratory analysis, but are only *practically* useful when we can iterate quickly

### Quickly prototype graphical (database) queries with __plotly__ + __crosstalk__

---
class: middle, center, principles

## Thanks! Questions?

Slides: &lt;https://talks.cpsievert.me&gt;

Learn more: &lt;https://plotly-book.cpsievert.me&gt;

#### Contact

<i class="fa  fa-twitter "></i> &lt;a href='https://twitter.com/cpsievert'&gt;@cpsievert&lt;/a&gt; &lt;br /&gt;
<i class="fa  fa-github "></i> &lt;a href='https://github.com/cpsievert'&gt;@cpsievert&lt;/a&gt; &lt;br /&gt;
<i class="fa  fa-envelope "></i> &lt;cpsievert1@gmail.com&gt; &lt;br /&gt;
<i class="fa  fa-globe "></i> &lt;https://cpsievert.me/&gt;
    </textarea>
<script src="../templates/remarkjs/libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "14.6:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {window.dispatchEvent(new Event('resize'));});
(function() {var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler"); if (!r) return; s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }"; d.head.appendChild(s);})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
